import requests

def obtener_planetas():
    """Obtiene la lista de planetas desde SWAPI."""
    planetas = []
    url = "https://swapi.dev/api/planets/"
    
    while url:
        response = requests.get(url)
        data = response.json()
        planetas.extend(data['results'])
        url = data['next']  
        
       
    
    return planetas

def obtener_personajes(personajes_urls):
    """Obtiene los nombres de los personajes que pertenecen al planeta."""
    personajes = []
    for url in personajes_urls:
        response = requests.get(url)
        personajes.append(response.json().get('name', 'Desconocido'))
    return personajes

def obtener_episodios(films_urls):
    """Obtiene los nombres de los episodios en los que aparece el planeta."""
    episodios = []
    for url in films_urls:
        response = requests.get(url)
        episodios.append(response.json().get('title', 'Desconocido'))
    return episodios

def mostrar_planetas(planetas):
    """Muestra la lista de planetas con la información requerida."""
    for planeta in planetas:
        nombre = planeta.get('name', 'Desconocido')
        periodo_orbita = planeta.get('orbital_period', 'Desconocido')
        periodo_rotacion = planeta.get('rotation_period', 'Desconocido')
        cantidad_habitantes = planeta.get('population', 'Desconocido')
        clima = planeta.get('climate', 'Desconocido')
        episodios = obtener_episodios(planeta.get('films', []))
        personajes = obtener_personajes(planeta.get('residents', []))

        print(f"Nombre: {nombre}")
        print(f"Periodo de órbita: {periodo_orbita}")
        print(f"Periodo de rotación: {periodo_rotacion}")
        print(f"Cantidad de habitantes: {cantidad_habitantes}")
        print(f"Clima: {clima}")
        print(f"Episodios: {', '.join(episodios) if episodios else 'Ninguno'}")
        print(f"Personajes: {', '.join(personajes) if personajes else 'Ninguno'}")
        print("-" * 40)  
        
        
def menu_principal():
    """Muestra el menú principal del sistema."""
    while True:
        print("Menu Principal:")
        print("1. Listar películas de Star Wars")
        print("2. Listar especies de Star Wars")
        print("3. Listar planetas de Star Wars")
        print("4. Salir")
        opcion = input("Seleccione una opción: ")

        if opcion == "1":
            peliculas = obtener_peliculas()
            mostrar_peliculas(peliculas)
        elif opcion == "2":
            especies = obtener_especies()
            mostrar_especies(especies)
        elif opcion == "3":
            planetas = obtener_planetas()
            mostrar_planetas(planetas)
        elif opcion == "4":
            print("¡Hasta luego!")
            break
        else:
            print("Opción no válida, por favor intente de nuevo.")


if __name__ == "__main__":
    menu_principal()
